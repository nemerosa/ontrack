# Application properties

#logging:
#  level:
#    org.springframework.security: DEBUG

# For Okta
#ontrack:
#  config:
#    authorization:
#      jwt:
#        debug: true
#        typ: application/okta-internal-at+jwt
#        claims:
#          email: sub

# Spring configuration
spring:
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://localhost:8008/realms/ontrack
  # Default database connection
  datasource:
    url: "jdbc:postgresql://localhost/ontrack"
    username: ontrack
    password: ontrack
  # Rabbit MQ configuration
  rabbitmq:
    host: localhost
    username: ontrack
    password: ontrack
  # Default profile
  profiles:
    default: prod
  # GraphQL
  graphql:
    schema:
      introspection:
        enabled: true
      printer:
        enabled: true
      locations: "classpath*:graphql/**"
    cors:
      allowed-origins: "*"
      allowed-methods:
        - GET
        - POST
        - OPTIONS
      max-age: 1800s
      allowed-headers: "*"

# Compression of web resources
server:
  compression:
    enabled: true

# Management
management:
  # Listening on a specific port
  server:
    port: 8800
  # Custom URL for the management end points and definition of exposure
  # Exposes details about health
  endpoint:
    health:
      show-details: always
  # Custom URL for the management end points
  endpoints:
    web:
      exposure:
        include: "*"
      base-path: "/manage"
  # Default settings for the metrics
  prometheus:
    metrics:
      export:
        enabled: true
  # Health indicators
  health:
    # Disable LDAP health indicator
    ldap:
      enabled: false
    # Disable the ElasticSearch health indicator by default
    elasticsearch:
      enabled: false

# The version information is generated in /config/application.properties by the build
info:
  app:
    name: Ontrack
    description: Continuous Delivery Traceability and Monitoring

# Session configuration
# This can be overridden at installation level
#server:
#  session:
#    # One hour for the session
#    timeout: 3600
#    cookie:
#      max-age: 3600
