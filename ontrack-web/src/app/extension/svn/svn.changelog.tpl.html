<ot-view>

    <div class="row" ng-hide="changeLog">
        <div class="col-md-12 alert alert-warning">
            The change log is loading. This may take some time...
        </div>
    </div>

    <div class="row" ng-show="changeLog">
        <div class="col-md-10">

            <!-- Main content -->

            <!-- Build info -->
            <div class="row">
                <div class="col-md-6">
                    <a name="buildFrom"></a>
                    <ot-scm-changelog-build scm-build-view="changeLog.scmBuildFrom">
                        <div class="row">
                            <div class="col-md-12">
                                <h3>
                                    <small>History</small>
                                </h3>
                                <ul class="ot-extension-svn-build-history">
                                    <li ng-repeat="reference in changeLog.scmBuildFrom.scm.references">
                                        <a href="{{reference.url}}">
                                            {{reference.path}}
                                            @
                                            {{reference.revision}}
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </ot-scm-changelog-build>
                </div>
                <div class="col-md-6">
                    <a id="buildTo"></a>
                    <ot-scm-changelog-build scm-build-view="changeLog.scmBuildTo">
                        <div class="row">
                            <div class="col-md-12">
                                <h3>
                                    <small>History</small>
                                </h3>
                                <ul class="ot-extension-svn-build-history">
                                    <li ng-repeat="reference in changeLog.scmBuildTo.scm.references">
                                        <a href="{{reference.url}}">
                                            {{reference.path}}
                                            @
                                            {{reference.revision}}
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </ot-scm-changelog-build>
                </div>
            </div>

            <!-- Revision sections -->
            <div class="row">
                <div class="col-md-12">
                    <a name="revisions"></a>

                    <div class="panel panel-default">
                        <div class="panel-heading">Revisions</div>
                        <div class="panel-body">
                            <div class="alert alert-warning" ng-hide="revisions">
                                No revision has been loaded yet. Click
                                <a ng-click="changeLogRevisions()">here</a>
                                to load them.
                            </div>
                            <!-- TODO Merge -->
                            <table class="table table-condensed table-hover" ng-show="revisions">
                                <thead>
                                <tr>
                                    <th>Revision</th>
                                    <th>Author</th>
                                    <th>Date</th>
                                    <th>Message</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="svnChangeLogRevision in revisions.list">
                                    <td>
                                        <a href="{{svnChangeLogRevision.revisionUrl}}" target="_blank">
                                            {{svnChangeLogRevision.revision}}
                                        </a>
                                    </td>
                                    <td>
                                        {{svnChangeLogRevision.author}}
                                    </td>
                                    <td>
                                        {{svnChangeLogRevision.revisionDate | date:'mediumDate'}}
                                        {{svnChangeLogRevision.revisionDate | date:'shortTime'}}
                                    </td>
                                    <td ng-bind-html="svnChangeLogRevision.formattedMessage">
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Issue sections -->
            <div class="row">
                <div class="col-md-12">
                    <a name="issues"></a>

                    <div class="panel panel-default">
                        <div class="panel-heading">Issues</div>
                        <div class="panel-body">
                            <div class="alert alert-warning" ng-hide="issues">
                                No issue has been loaded yet. Click
                                <a ng-click="changeLogIssues()">here</a>
                                to load them.
                            </div>
                            <table class="table table-condensed table-hover" ng-show="issues">
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- End of sections -->

        </div>

        <div class="col-md-2">
            <!-- Quick links and activation of detailed change logs -->
            <ul class="ot-extension-scm-changelog-commands">
                <li>
                    <button class="btn btn-default" ng-click="changeLogRevisions()" ng-disabled="revisionsLoading">
                        <span class="ot-extension-scm-changelog-command-unloaded" ng-hide="revisions"></span>
                        <span class="ot-extension-scm-changelog-command-loading"></span>
                        {{revisionsCommand}}
                    </button>
                </li>
                <li>
                    <button class="btn btn-default" ng-click="changeLogIssues()" ng-disabled="issuesLoading">
                        <span class="ot-extension-scm-changelog-command-unloaded" ng-hide="issues"></span>
                        <span class="ot-extension-scm-changelog-command-loading"></span>
                        {{issuesCommand}}
                    </button>
                </li>
            </ul>
        </div>
    </div>

</ot-view>